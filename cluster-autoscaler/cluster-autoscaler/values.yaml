replicaCount: 1
revisionHistoryLimit: 10

deployment:
  annotations: {}
  labels: {}

image:
  repository: "k8s.gcr.io/cluster-autoscaler"
  tag: "v1.21.0"
  pullPolicy: "IfNotPresent"

cloudProvider: "aws"
awsRegion: "us-east-1"
autoDiscovery:
  clusterName: "redhat-eks-cluster-dev"
  namespace: "kube-system"
  tags:
    - "tag1=value1"
    - "tag2=value2"
  labels: []
  roles: []
autoscalingGroups:
  - name: "my-auto-scaling-group"
    minSize: 1
    maxSize: 5
    instanceType: "t2.micro"
    region: "us-east-1"

priorityClassName: "high-priority"
dnsPolicy: "ClusterFirst"
hostNetwork: false

initContainers: []

podAnnotations: {}

podLabels: {}

updateStrategy:
  type: "RollingUpdate"
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0

extraArgs: 
  - "v"
  - "4"

extraEnv: 
  CUSTOM_ENV: "value"

envFromSecret: ""
envFromConfigMap: ""

resources:
  limits:
    cpu: "100m"
    memory: "128Mi"
  requests:
    cpu: "50m"
    memory: "64Mi"

containerSecurityContext: {}

affinity: {}
nodeSelector: {}
tolerations: []
topologySpreadConstraints: []

securityContext: {}

extraVolumeSecrets: {}
extraVolumeMounts: []

cloudConfigPath: "/etc/cloudconfig"

serviceAccountName: "cluster-autoscaler-sa"

# Add this to your values.yaml file
vpa:
  enabled: false  # Set to true if you want to enable Vertical Pod Autoscaler

# Enable ServiceMonitor
serviceMonitor:
  enabled: true  # Enable ServiceMonitor
  additionalLabels:  # Optional - Add labels to the ServiceMonitor
    release: "cluster-autoscaler"
  # Optional: Define monitoring rules for Prometheus
  servicemonitor:
    rules:
      - alert: "HighPodCPUUsage"
        expr: sum(rate(container_cpu_usage_seconds_total{job="cluster-autoscaler", cluster="", namespace="kube-system", container!="", pod=~"cluster-autoscaler.*"}[5m])) by (pod)
        for: 5m
        labels:
          severity: "critical"
        annotations:
          description: "CPU usage is above 80% for 5 minutes."
      - alert: "HighPodMemoryUsage"
        expr: sum(container_memory_usage_bytes{job="cluster-autoscaler", cluster="", namespace="kube-system", container!="", pod=~"cluster-autoscaler.*"}) by (pod) > 80e6  # 80MiB
        for: 5m
        labels:
          severity: "critical"
        annotations:
          description: "Memory usage is above 80MiB for 5 minutes."

# Add other configurations below as necessary
